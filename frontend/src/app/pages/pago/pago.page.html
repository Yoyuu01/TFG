<div class="ion-page" id="main-content">
  <app-header></app-header>
  <ion-content [fullscreen]="true">
    <div class="hero-section">
      <h1>Pagar reserva</h1>
      <p>Introduce los datos de tu pago para completar la reserva</p>
    </div>

    <div class="pago-layout">
      <div class="pago-col-izq">
        <div class="tarjeta-visual">
          <div class="tarjeta-chip"></div>
          <div class="tarjeta-numero">{{ getNumeroTarjetaFormateado() }}</div>
          <div class="tarjeta-datos fila">
            <div>
              <span class="tarjeta-label">Titular</span>
              <span class="tarjeta-titular">{{ nombreTarjeta || 'NOMBRE Y APELLIDO' }}</span>
            </div>
            <div>
              <span class="tarjeta-label">Caduca</span>
              <span class="tarjeta-caducidad">{{ caducidadTarjeta || 'MM/AA' }}</span>
            </div>
            <div>
              <span class="tarjeta-label">CVV</span>
              <span class="tarjeta-cvv">{{ cvvTarjeta ? '•••' : '•••' }}</span>
            </div>
          </div>
        </div>
        <div class="resumen-vuelo">
          <div class="resumen-header">
            <div>
              <h2>Tu viaje a {{ reserva.vuelo_nombre || 'Destino' }}</h2>
              <span class="icon-avion">✈️</span>
            </div>
          </div>
          <div class="resumen-body">
            <div><strong>Nombre:</strong> {{ reserva.nombre }}</div>
            <div><strong>Fecha de nacimiento:</strong> {{ reserva.fecha_reserva }}</div>
            <div><strong>Asiento:</strong> {{ reserva.asiento }}</div>
          </div>
        </div>
      </div>
      <div class="pago-col-der">
        <div class="pago-container">
          <h3>Datos de pago</h3>
          <ion-list class="pago-form-list-casillas">
            <div class="casilla-form-group">
              <label for="nombreTarjeta" class="casilla-label">Nombre en la tarjeta</label>
              <input id="nombreTarjeta" type="text" [(ngModel)]="nombreTarjeta" class="casilla-input" required />
            </div>
            <div class="casilla-form-group">
              <label for="numeroTarjeta" class="casilla-label">Número de tarjeta</label>
              <input id="numeroTarjeta" type="tel" inputmode="numeric" pattern="[0-9]*" maxlength="16" [(ngModel)]="numeroTarjeta" class="casilla-input" required />
            </div>
            <div class="casilla-form-group">
              <label for="caducidadTarjeta" class="casilla-label">Fecha de caducidad</label>
              <input id="caducidadTarjeta" type="text" [(ngModel)]="caducidadTarjeta" (input)="onCaducidadInput($event)" maxlength="5" placeholder="MM/YY" class="casilla-input" />
            </div>
            <div class="casilla-form-group">
              <label for="cvvTarjeta" class="casilla-label">CVV</label>
              <input id="cvvTarjeta" type="text" [(ngModel)]="cvvTarjeta" (input)="onCVVInput($event)" maxlength="3" placeholder="CVV" class="casilla-input" />
            </div>
          </ion-list>
          <ion-button expand="block" class="pago-btn" (click)="realizarPago()">Pagar</ion-button>
          <div *ngIf="mensaje" class="mensaje-pago">{{ mensaje }}</div>
        </div>
      </div>
    </div>
    <footer class="app-footer">
      <div class="footer-features">
        <div class="feature-item">
          <ion-icon name="airplane-outline" class="feature-icon"></ion-icon>
          <h3>Vuelos Directos</h3>
          <p>Conexiones directas a los mejores destinos de Europa</p>
        </div>

        <div class="feature-item">
          <ion-icon name="wallet-outline" class="feature-icon"></ion-icon>
          <h3>Mejores Precios</h3>
          <p>Garantizamos las tarifas más competitivas del mercado</p>
        </div>

        <div class="feature-item">
          <ion-icon name="shield-checkmark-outline" class="feature-icon"></ion-icon>
          <h3>Viaja Seguro</h3>
          <p>Reservas garantizadas y atención personalizada</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 EuroJet. Todos los derechos reservados.</p>
      </div>
    </footer>
  </ion-content>
</div>