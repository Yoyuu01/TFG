<div class="ion-page" id="main-content">
  <app-header></app-header>
  <ion-content [fullscreen]="true">
    <div class="hero-section">
      <h1>Pagar reserva</h1>
      <p>Introduce los datos de tu pago para completar la reserva</p>
    </div>

    <div class="pago-layout">
      <div class="pago-col-izq">
        <div class="tarjeta-visual">
          <div class="tarjeta-chip"></div>
          <div class="tarjeta-numero">{{ getNumeroTarjetaFormateado() }}</div>
          <div class="tarjeta-datos fila">
            <div>
              <span class="tarjeta-label">Titular</span>
              <span class="tarjeta-titular">{{ nombreTarjeta || 'NOMBRE Y APELLIDO' }}</span>
            </div>
            <div>
              <span class="tarjeta-label">Caduca</span>
              <span class="tarjeta-caducidad">{{ caducidadTarjeta || 'MM/AA' }}</span>
            </div>
            <div>
              <span class="tarjeta-label">CVV</span>
              <span class="tarjeta-cvv">{{ cvvTarjeta ? '•••' : '•••' }}</span>
            </div>
          </div>
        </div>
        <div class="resumen-vuelo">
          <div class="resumen-header">
            <div>
              <h2>Tu viaje a {{ vuelo?.destino || 'Destino' }}</h2>
              <span class="icon-avion">✈️</span>
            </div>
          </div>
          <div class="resumen-body">
            <div class="vuelo-info">
              <div class="vuelo-horario">
                <div>
                  <span class="hora">{{ vuelo?.horaSalida || '08:55' }}</span>
                  <span class="ciudad">{{ vuelo?.origen || 'BCN' }}</span>
                  <div class="fecha">{{ vuelo?.fechaSalida || 'Sab, 10 May' }}</div>
                  <div class="aeropuerto">{{ vuelo?.aeropuertoOrigen || 'El Prat, Barcelona' }}</div>
                </div>
                <div class="trayecto">
                  <span class="sin-escalas">Sin escalas</span>
                </div>
                <div>
                  <span class="hora">{{ vuelo?.horaLlegada || '11:10' }}</span>
                  <span class="ciudad">{{ vuelo?.destino || 'EIN' }}</span>
                  <div class="fecha">{{ vuelo?.fechaLlegada || 'Sab, 10 May' }}</div>
                  <div class="aeropuerto">{{ vuelo?.aeropuertoDestino || 'Welschap, Eindhoven' }}</div>
                </div>
              </div>
              <div class="vuelo-extra">
                <span class="duracion">{{ vuelo?.duracion || '2 h 15 min' }}</span>
                <span class="atencion">⚠️ ¡Atención! Solo una maleta pequeña incluida</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pago-col-der">
        <div class="pago-container">
          <h3>Datos de pago</h3>
          <ion-list class="pago-form-list-casillas">
            <div class="casilla-form-group">
              <label for="nombreTarjeta" class="casilla-label">Nombre en la tarjeta</label>
              <input id="nombreTarjeta" type="text" [(ngModel)]="nombreTarjeta" class="casilla-input" required />
            </div>
            <div class="casilla-form-group">
              <label for="numeroTarjeta" class="casilla-label">Número de tarjeta</label>
              <input id="numeroTarjeta" type="tel" inputmode="numeric" pattern="[0-9]*" maxlength="16" [(ngModel)]="numeroTarjeta" class="casilla-input" required />
            </div>
            <div class="casilla-form-group">
              <label for="caducidadTarjeta" class="casilla-label">Fecha de caducidad</label>
              <input id="caducidadTarjeta" type="text" [(ngModel)]="caducidadTarjeta" (input)="onCaducidadInput($event)" maxlength="5" placeholder="MM/YY" class="casilla-input" />
            </div>
            <div class="casilla-form-group">
              <label for="cvvTarjeta" class="casilla-label">CVV</label>
              <input id="cvvTarjeta" type="text" [(ngModel)]="cvvTarjeta" (input)="onCVVInput($event)" maxlength="3" placeholder="CVV" class="casilla-input" />
            </div>
          </ion-list>
          <ion-button expand="block" class="pago-btn" (click)="realizarPago()">Pagar</ion-button>
          <div *ngIf="mensaje" class="mensaje-pago">{{ mensaje }}</div>
        </div>
      </div>
    </div>
  </ion-content>
</div>